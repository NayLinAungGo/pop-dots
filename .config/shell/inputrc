$include /etc/inputrc

set editing-mode vi

$if mode=vi
	$if term=linux
		set vi-ins-mode-string \1\e[?3c\2
		set vi-cmd-mode-string \1\e[?6c\2
	$else
		set vi-ins-mode-string \1\e[5 q\2
		set vi-cmd-mode-string \1\e[1 q\2
	$endif
	set show-mode-in-prompt on
	
	# Emacs Mode rebinds for VI Mode; see READLINE(3)
	set keymap vi-insert
		Control-L: clear-screen
		Control-B: backward-char
		Control-F: forward-char
		Meta-B: backward-word
		Meta-F: forward-word
		Control-A: beginning-of-line
		Control-E: end-of-line

	set keymap vi-insert
		Control-K: kill-line
		Meta-D: kill-word
		Meta-Y: yank-pop
		Meta-Control-Y: yank-nth-arg
		"Meta+.": yank-last-arg

	set keymap vi-insert
		Control-N:  next-history
		Control-P:  previous-history
		Meta-N:  non-incremental-forward-search-history
		Meta-P:  non-incremental-reverse-search-history
		# Abort the reverse search; restore original line.
		Control-G: abort

	set keymap vi-insert
		"jk": vi-movement-mode
$endif
